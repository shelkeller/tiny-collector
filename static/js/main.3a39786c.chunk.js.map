{"version":3,"sources":["components/PlotGrid/Plot.js","components/PlotGrid/PlotRow.js","utils/dice.js","constants/colors.js","config/gameConfig.js","App.js","index.js"],"names":["Plot","props","plot","handleClick","classy","content","color","isFlower","tooltipContent","style","fontSize","row","col","plotStyle","backgroundColor","Tooltip","title","arrow","className","onClick","id","PlotRow","plots","gridState","gridStateSetter","thePlot","filter","console","log","map","i","rollUpTo","max","Math","floor","random","grassColors","colorNames","gameConfig","flowerHues","theme","createMuiTheme","palette","primary","main","App","rowSize","useState","size","plots2D","times","colorRoll","length","colorName","name","push","splice","r","c","generatePlots","plotGrid","setPlotGrid","trueTime","setTrueTime","displayTime","findEmptyNeighbors","x","y","neighbors","findNeighbors","empties","step","pick","plantFlower","timeOfDay","padding","borderRadius","border","ThemeProvider","Button","variant","margin","paddingTop","plotRow","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3a39786c.chunk.js","sourcesContent":["import LocalFlorist from \"@material-ui/icons/LocalFlorist\";\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst Plot = props => {\r\n  let plot = props.plot;\r\n  let handleClick = props.handleClick;\r\n  let classy = \"hexagon \"+plot.content;\r\n  let color = plot.color;\r\n  let content = \"\";\r\n\r\n  if (plot.isFlower) content = <LocalFlorist />;\r\n\r\n  let tooltipContent = <p style={{fontSize: 14}}>{plot.row}, {plot.col}</p>\r\n  let plotStyle = { backgroundColor: color };\r\n  return (\r\n    <Tooltip title={tooltipContent} arrow>\r\n    <div className={classy} style={plotStyle} onClick={()=>{\r\n      handleClick(plot.id);\r\n    }} >\r\n      <div className=\"hexagontent\">\r\n        {content}\r\n      </div>\r\n    </div>\r\n    </Tooltip>\r\n  )\r\n\r\n}\r\nexport default Plot;\r\n","import { useState } from \"react\";\r\nimport Plot from \"./Plot\";\r\n\r\nconst PlotRow = (props) => {\r\n  const plots = props.plots;\r\n  const gridState = props.gridState;\r\n  const gridStateSetter = props.gridStateSetter;\r\n\r\n  const handleClick = (id) => {\r\n    let thePlot = plots.filter((plot) => {return plot.id === id})[0];\r\n    console.log(thePlot);\r\n  }\r\n\r\n  return (\r\n    <div className=\"ibws-fix\">\r\n    {\r\n      plots.map((plot, i)=>{\r\n        return <Plot key={\"key\"+i} plot={plot} handleClick={handleClick} />\r\n      })\r\n    }\r\n    </div>\r\n  )\r\n}\r\nexport default PlotRow;\r\n","export const rollUpTo = (max) => {\r\n  return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n","export const grassColors = [\r\n  \"#42796c\",\r\n  \"#3a514c\",\r\n  \"#185653\"\r\n]\r\n\r\nexport const colorNames = [\r\n  \"Red\",\r\n  \"Yellow\",\r\n  \"Green\",\r\n  \"Cyan\",\r\n  \"Blue\",\r\n  \"Violet\"\r\n]\r\nexport const flowerColors = [\r\n  \"#9f1f2b\", //red\r\n  \"#e0c55f\", //yellow\r\n  \"#7ddf84\", //green\r\n  \"#00c0cd\", //cyan\r\n  \"#3b66db\", //blue\r\n  \"#9e7af0\" //violet\r\n]\r\n\r\n/*\r\ntaken from here:\r\nhttps://personal.sron.nl/~pault/\r\n*/\r\n\r\nexport const flowerColorsAccessible = [\r\n  \"#e6677\", //red\r\n  \"#ccbb44\", //yellow\r\n  \"#228833\", //green\r\n  \"#66ccee\", //cyan\r\n  \"#4477aa\", //blue\r\n  \"#aa3377\" //violet\r\n]\r\n","export const gameConfig = {\r\n  title: \"tiny collector\",\r\n  rowSize: 9, // number of plots per row\r\n  fertility: 3, // 1...100, initial flower spawn rate\r\n  accessibilityMode: false\r\n}\r\n","import './styles/App.css';\r\nimport times from 'lodash/times';\r\nimport PlotRow from './components/PlotGrid/PlotRow';\r\nimport { useState } from 'react';\r\nimport { rollUpTo } from './utils/dice';\r\nimport { grassColors, flowerColors, flowerColorsAccessible, colorNames } from './constants/colors';\r\nimport { gameConfig } from './config/gameConfig';\r\nimport { WiDaySunny, WiSunrise, WiNightAltPartlyCloudy } from \"weather-icons-react\";\r\n\r\n\r\nimport {\r\n  createMuiTheme,\r\n  createStyles,\r\n  withStyles,\r\n  makeStyles,\r\n  Theme,\r\n  ThemeProvider,\r\n} from '@material-ui/core/styles';\r\nimport { green, purple } from '@material-ui/core/colors';\r\nimport Button from '@material-ui/core/Button';\r\nimport UpdateIcon from '@material-ui/icons/Update';\r\n\r\n\r\nlet flowerHues = gameConfig.accessibilityMode ? flowerColorsAccessible : flowerColors;\r\n\r\n//returns a 2D array \"plot\" objects: {id, isFlower, color, name, content, row, column}\r\nconst generatePlots = (size) => {\r\n  let plots = [];\r\n  let plots2D = [];\r\n\r\n  times(size, id => {\r\n      let color;\r\n      let dice = rollUpTo(100); // roll a 100 sided die\r\n      if (dice<=gameConfig.fertility){ // chance of rolling a flower\r\n\r\n        var colorRoll = rollUpTo(flowerHues.length); //Select a flower hue\r\n        color = flowerHues[colorRoll];\r\n        let colorName = colorNames[colorRoll]; //Get its matching color name\r\n        plots[id] = {\r\n          id: id,\r\n          isFlower: true,\r\n          color: color,\r\n          name: colorName + \" Flower\",\r\n          content: \"flower\"\r\n        };\r\n\r\n      } else {\r\n        color = grassColors[rollUpTo(grassColors.length)];\r\n        plots[id] = {\r\n          id: id,\r\n          isFlower: false,\r\n          color: color,\r\n          name: \"Empty\",\r\n          content: \"grass\"\r\n        };\r\n      }\r\n  });\r\n\r\n  //We splice it into rows, and make a 2D array of those.\r\n  while(plots.length) plots2D.push(plots.splice(0, gameConfig.rowSize));\r\n\r\n  // load up the plots with coordinate information.\r\n  // This will be used to determine neighbors later.\r\n  times(plots2D.length, r => {\r\n    times(plots2D[r].length, c => {\r\n      plots2D[r][c].row = r;\r\n      plots2D[r][c].col = c;\r\n    });\r\n  });\r\n\r\n  return plots2D;\r\n}\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#185653\"\r\n    },\r\n  },\r\n});\r\n\r\n\r\nfunction App() {\r\n  const rowSize = gameConfig.rowSize;\r\n  const title = gameConfig.title;\r\n\r\n  const [plotGrid, setPlotGrid] = useState(generatePlots(rowSize*(rowSize-1)));\r\n  const [trueTime, setTrueTime] = useState(0);\r\n  const displayTime = 1+Math.floor(trueTime/3);\r\n\r\n  const findNeighbors = (x , y) => {\r\n    /*\r\n    clockwise:\r\n    up: x-1, y\r\n    upright: x-1, y+1\r\n    downright: x, y+1\r\n    down: x+1, y\r\n    downleft: x+1, y-1\r\n    upleft: x-1, y-1\r\n\r\n    if x>0, get up\r\n    if x>0 && y<gameConfig.rowSize, get upright\r\n    if y<gameConfig.rowSize, get downRight\r\n    if x<gameConfig.rowSize-1, get down\r\n    if x<gameConfig.rowSize-1 && y>0, get downleft\r\n    if x>0 and y>0, get upleft\r\n    */\r\n\r\n    let neighbors = [];\r\n    if (x > 0)  neighbors.push({row: x-1, col: y});\r\n    if (x > 0 && y < gameConfig.rowSize-1) neighbors.push({row: x-1, col: y+1});\r\n    if (y < gameConfig.rowSize-1) neighbors.push({row: x, col: y+1});\r\n    if (x < gameConfig.rowSize-2) neighbors.push({row: x+1, col: y});\r\n    if (x < gameConfig.rowSize-2 && y > 0 ) neighbors.push({row: x+1, col: y-1});\r\n    if (x > 0 && y > 0) neighbors.push({row: x-1, col: y-1});\r\n\r\n    return neighbors;\r\n  }\r\n\r\n  let findEmptyNeighbors = (x , y) =>{\r\n    let neighbors = findNeighbors(x, y);\r\n    let empties = [];\r\n    times(neighbors.length, (i) => {\r\n      if (plotGrid[neighbors[i].row][neighbors[i].col].content==='grass'){\r\n        empties.push(plotGrid[neighbors[i].row][neighbors[i].col]);\r\n      }\r\n    });\r\n\r\n    return empties;\r\n  }\r\n\r\n  const plantFlower = (x, y) =>{\r\n    let dice = rollUpTo(100); // roll a 100 sided die\r\n    var colorRoll = rollUpTo(flowerHues.length); //Select a flower hue\r\n    let color = flowerHues[colorRoll];\r\n    let colorName = colorNames[colorRoll]; //Get its matching color name\r\n    plotGrid[x][y] = {\r\n        isFlower: true,\r\n        color: color,\r\n        name: colorName + \" Flower\",\r\n        content: \"flower\",\r\n        row: x,\r\n        col: y\r\n      };\r\n      setPlotGrid(plotGrid);\r\n\r\n}\r\n  const step = () => {\r\n    setTrueTime(trueTime + 1);\r\n\r\n    times(plotGrid.length, row => {\r\n      times(plotGrid[row].length, col=> {\r\n        if (plotGrid[row][col].isFlower){\r\n          let empties = findEmptyNeighbors(row, col);\r\n          console.log(empties);\r\n            let pick = empties[rollUpTo(empties.length)];\r\n            console.log(!!pick);\r\n            if (pick) plantFlower(pick.row, pick.col);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  let timeOfDay = \"\";\r\n\r\n  if ( trueTime % 3 === 0) { timeOfDay = <WiSunrise size={40} style={{backgroundColor: '#d47986', padding: '3 2 0 2', borderRadius: '10px', border: '2px solid white'}}/>; }\r\n  else if ( trueTime % 3 === 1 ) { timeOfDay = <WiDaySunny size={40} style={{backgroundColor: '#dbbd72', padding: '3 2 0 2', borderRadius: '10px', border: '2px solid white'}}/>; }\r\n  else if ( trueTime % 3 === 2 ) { timeOfDay = <WiNightAltPartlyCloudy size={40} style={{backgroundColor: '#739cde', padding: '3 2 0 2', borderRadius: '10px', border: '2px solid white'}}/>; }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n      {title}\r\n       <Button variant=\"contained\" color=\"primary\" onClick={() =>{\r\n           step();\r\n         }} style={{\r\n           margin: \"1em\"\r\n         }}>\r\n         <UpdateIcon />\r\n       </Button>\r\n       <p>{timeOfDay}</p>\r\n       <p> {'Day '+displayTime} </p>\r\n\r\n     {/*\r\n     I get that it would probably be a good idea to\r\n     have another component called PlotGrid or something\r\n     but really all it would do is wrap this set of PlotRows\r\n     in a div with this className. and that just isn't enough\r\n     stuff to justify a whole file or even its own variable\r\n     I think\r\n     */}\r\n      <div className=\"honeycomb\" style={{paddingTop: \"2em\"}}>\r\n        {plotGrid.map((plotRow, i) => {\r\n          return <PlotRow plots={plotRow} gridState={plotGrid} gridStateSetter={setPlotGrid} />\r\n        })}\r\n      </div>\r\n      </header>\r\n    </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport './styles/hexagon.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}